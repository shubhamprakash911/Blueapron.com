<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./styles/index.css" />
    <script
      src="https://kit.fontawesome.com/3616362b1c.js"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
  </head>
  <body>
    <header>
      <div id="nav">
        <div id="logo">
          <a href="./index.html"><img src="./image/Eat & Reap.png" /></a>
        </div>

        <div id="search">
          <form id="searchform">
            <input
              type="text"
              placeholder=" Search for cuisine or a dish..."
              name="search"
              id="searchInp"
            />
            <button type="submit" id="searchBtn">
              <i class="fa fa-search"></i>
            </button>
          </form>
        </div>

        <div id="addtocart">
          <a href="./cart.html"
            ><span class="material-symbols-outlined">restaurant</span></a
          >
        </div>

        <div id="register">
          <div id="signin">
            <a href="./signin.html" class="login">SignIn</a
            ><span style="display: none" id="username"></span>
          </div>
          <div id="signup">
            <a href="./signUp.html" class="signup">SignUp</a
            ><a href="./index.html"
              ><span id="logout" style="display: none">Logout</span></a
            >
          </div>
        </div>
      </div>
    </header>
  </body>

  <script>
    let searchform = document.getElementById("searchform");
    searchform.addEventListener("submit", (e) => {
      e.preventDefault();
      const searchInp = document.getElementById("searchInp").value;
      localStorage.setItem("productData", searchInp);
      localStorage.setItem("brand", "");
      window.location.href = "./products.html";
    });

    const token = JSON.parse(localStorage.getItem("LoginUser"));

    if (token) {
      document.querySelector(".login").style.display = "none";
      document.querySelector(".signup").style.display = "none";
      const username = document.querySelector("#username");
      username.style.display = "inline";
      username.innerHTML = token.name;
      const logout = document.querySelector("#logout");
      logout.style.display = "inline";
      logout.addEventListener("click", () => {
        localStorage.removeItem("LoginUser");
      });
    } else {
      document.querySelector(".login").style.display = "inline";
      document.querySelector(".signup").style.display = "inline";
      document.querySelector("#username").style.display = "none";
      document.querySelector("#logout").style.display = "none";
    }
  </script>
</html>
